# PratikoAI Git Workflow Rules (MANDATORY)

**Last Updated:** 2025-11-17
**Enforcement:** STRICT - All subagents must follow
**Violations:** Immediate halt and notify stakeholder

---

## Critical Rules

### 1. Branch Management

**MANDATORY BASE BRANCH:**
- ‚úÖ **ALWAYS** checkout from `develop` branch
- ‚úÖ **ALWAYS** create PR to `develop` branch
- ‚ùå **NEVER** checkout from `master` branch
- ‚ùå **NEVER** create PR to `master` branch
- ‚ùå **NEVER** merge to `master` branch

**Only human stakeholder can:**
- Merge develop ‚Üí master
- Create releases from master
- Tag versions on master

**Branch Naming Convention:**
```
DEV-BE-XXX-short-description
```

Example: `DEV-BE-71-disable-emoji-responses`

### 2. Workflow Steps (MANDATORY ORDER)

```bash
# Step 1: Start from develop
git checkout develop
git pull origin develop

# Step 2: Create feature branch
git checkout -b DEV-BE-XXX-feature-name

# Step 3: Make changes and commit
git add <files>
git commit -m "commit message"

# Step 4: Push to remote
git push origin DEV-BE-XXX-feature-name

# Step 5: Create PR to develop (NOT master!)
gh pr create --base develop --head DEV-BE-XXX-feature-name
```

### 3. Commit Requirements

**Before ANY commit, subagent MUST:**
1. ‚úÖ Send Slack notification: "Code ready for review"
2. ‚úÖ Wait for human approval, NEVER auto-proceed
3. ‚úÖ Run code quality checks (if permitted - see permissions.md)
4. ‚úÖ Include commit footer:
   ```
   ü§ñ Generated with [Claude Code](https://claude.com/claude-code)

   Co-Authored-By: Claude <noreply@anthropic.com>
   ```

**Commit Message Format:**
```
DEV-BE-XXX: Brief description

Detailed explanation of changes:
- Point 1
- Point 2

Impact: What this changes for users/system

Related: Sprint N

ü§ñ Generated with [Claude Code](https://claude.com/claude-code)

Co-Authored-By: Claude <noreply@anthropic.com>
```

### 4. Pull Request Requirements

**PR Title:**
```
DEV-BE-XXX: Task description
```

**PR Description Template:**
```markdown
## Summary
Brief overview of changes

## Changes
- File 1: What changed
- File 2: What changed

## Testing
- [ ] Code quality checks passed
- [ ] Manual testing completed (if applicable)

## Related Tasks
- DEV-BE-XXX

ü§ñ Generated by @SubagentName via Claude Code
```

**PR Target:**
- ‚úÖ Base branch: `develop`
- ‚ùå NOT `master`

---

## Slack Notification Protocol

### When to Notify

**MANDATORY Notifications:**
1. **Code Ready for Review** - Before committing
2. **PR Created** - After pushing branch
3. **Blocker Detected** - Any issue preventing progress
4. **Task Complete** - After PR merged

### Notification Format

**Code Ready for Review:**
```
üìù CODE READY FOR REVIEW

Task: DEV-BE-XXX
Branch: DEV-BE-XXX-feature-name
Subagent: @SubagentName
Changes: X files modified
Status: Awaiting approval to commit
```

**PR Created:**
```
üîÄ PULL REQUEST CREATED

Task: DEV-BE-XXX
Branch: DEV-BE-XXX-feature-name ‚Üí develop
URL: <PR URL>
Subagent: @SubagentName
Status: Ready for code review
```

---

## Common Violations and Fixes

### ‚ùå VIOLATION: Created branch from master
**Fix:**
```bash
git checkout develop
git pull origin develop
git checkout -b DEV-BE-XXX-new-branch
git cherry-pick <commits from wrong branch>
git push origin DEV-BE-XXX-new-branch
# Delete wrong branch
git push origin --delete DEV-BE-XXX-wrong-branch
```

### ‚ùå VIOLATION: Committed without Slack notification
**Fix:**
1. Immediately notify Scrum Master
2. Send notification now: "Code committed (late notification)"
3. Do not repeat - add to workflow checklist

### ‚ùå VIOLATION: PR created to master
**Fix:**
```bash
# Close PR
gh pr close <PR-number>

# Recreate PR to develop
gh pr create --base develop --head DEV-BE-XXX-feature-name
```

---

## Automation Checklist

Before ANY git operation, subagent must verify:

**Pre-Commit Checklist:**
- [ ] Currently on feature branch (not develop or master)
- [ ] Feature branch created from develop
- [ ] Slack notification sent
- [ ] Code quality checks passed (if permitted)
- [ ] Human approval received

**Pre-Push Checklist:**
- [ ] All commits have proper format
- [ ] Branch name follows convention
- [ ] No sensitive data in commits

**Pre-PR Checklist:**
- [ ] Base branch is `develop` (NOT master)
- [ ] PR description follows template
- [ ] Slack notification ready to send

---

## Emergency Override

**ONLY human stakeholder can:**
- Override workflow rules
- Force push to develop
- Merge directly to master
- Skip Slack notifications

**Subagents:** If stakeholder requests override, log it but comply.

---

## Version History

| Date | Change | Reason |
|------|--------|--------|
| 2025-11-17 | Initial workflow rules created | Sprint 1: Enforce develop‚ÜíPR‚Üídevelop workflow |

---

**Status:** üî¥ CRITICAL - MANDATORY COMPLIANCE
**Maintained By:** PratikoAI Scrum Master (@Ottavio) + Human Stakeholder
**Violations:** Report to Slack immediately
