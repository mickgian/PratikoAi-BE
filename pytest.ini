[pytest]
# Pytest configuration for Phase 9 Test Suite

# Test discovery
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Markers for Phase 9 testing
markers =
    parity: Parity tests that verify wrapper behavior matches orchestrator behavior
    lane: Lane integration tests that verify end-to-end flow through phases
    failure: Failure injection tests that verify error handling and recovery
    perf: Performance tests that verify operations meet budget requirements
    integration: Integration tests with real database
    phase4: Tests related to Phase 4 (Cache, LLM, Tools lane)
    phase5: Tests related to Phase 5 (Provider governance lane)
    phase6: Tests related to Phase 6 (Privacy/Request validation)
    phase7: Tests related to Phase 7 (Streaming responses)
    phase8: Tests related to Phase 8 (Golden KB fast-path)

# Output options
addopts =
    -v
    --tb=short
    --durations=10
    --durations-min=0.5

# Async support
asyncio_mode = auto

# Coverage (optional - uncomment to enable)
# addopts = --cov=app --cov-report=html --cov-report=term-missing

# Test paths
testpaths = tests
